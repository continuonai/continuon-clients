Starting Server Manual Debug (Unbuffered)...
Could not import BackgroundLearner (likely missing dependencies like torch). Background learning will be disabled.
DEBUG: Loading ui_routes.py with Jinja2 templates
WARNING:BrainServer:Port 8080 in use; bound to 8081 instead
Starting ContinuonBrain Server on port 8081...
Scanning for hardware devices...

âœ… Found: OAK Camera (USB 3.0)
âœ… Found: Hailo AI HAT+ (PCIe)
âœ… Found: Desktop Monitor

============================================================
AGENT SELF-ACTIVATION REPORT
============================================================

SHELL TYPE: Physical Robot (ARM)
   OS: Linux (aarch64)
   Hostname: robot


BRAIN & MEMORY:
   I possess 0 local memories (episodes).
   I am operating on basic logic; no trained models found.

BODY & HARDWARE:
   I see the world through: OAK Camera.
   I have no actuators detected.
   I think fast with: Hailo AI HAT+.
   My PCA9685 wiring for movement is configured:
     - Steering: Channel 0
     - Acceleration: Channel 1

DESIGN & PURPOSE:
   My core directives contain 0 safety rules and 0 instructions.

ready_status: [INGESTION: OK] [PROCESSING: OK] [TASK_CREATION: WAITING]
Status: Awaiting owner instructions in AUTONOMY mode.

============================================================

Agent Manager Settings:
  Thinking Indicator: True
  Intervention Prompts: True
  Confidence Threshold: 0.5
  Status Updates: True
  Autonomous Learning: True
INFO:continuonbrain.resource_monitor:No resource limits config found at /tmp/continuonbrain_demo/config/resource_limits.json, using defaults
INFO:continuonbrain.resource_monitor:Resource Monitor initialized: System reserve 2000MB, Brain max 2000MB
WARNING:continuonbrain.resource_monitor:Resource level changed: normal -> warning: WARNING: Memory at 82.7% - 1392MB available
INFO:continuonbrain.resource_monitor:Triggering 0 cleanup callbacks for warning
INFO:continuonbrain.services.brain_service:ðŸ“Š Resource Monitor initialized: {'level': 'warning', 'memory_percent': 82.7, 'available_mb': 1392, 'swap_percent': 63.4, 'checkpoints_mb': 0.0, 'can_allocate': False, 'message': 'WARNING: Memory at 82.7% - 1392MB available', 'limits': {'system_reserve_mb': 2000, 'max_brain_mb': 2000}}
INFO:continuonbrain.services.brain_service:ðŸ“š Experience logger initialized for active learning
INFO:continuonbrain.services.brain_service:ðŸ’¬ Conversation session management initialized
INFO:continuonbrain.services.brain_service:ðŸ¤– Personality initialized: PersonalityConfig(humor_level=0.5, sarcasm_level=0.5, empathy_level=0.5, verbosity_level=0.5, system_name='robot', identity_mode='Adaptive')
WARNING:continuonbrain.gemma_chat:transformers not available: cannot import name '_regex' from partially initialized module 'regex' (most likely due to a circular import) (/home/craigm26/.local/lib/python3.13/site-packages/regex/__init__.py).
INFO:continuonbrain.gemma_chat:Using mock Gemma chat. Error: cannot import name '_regex' from partially initialized module 'regex' (most likely due to a circular import) (/home/craigm26/.local/lib/python3.13/site-packages/regex/__init__.py)
INFO:continuonbrain.services.brain_service:Loaded agent settings: {'agent_model': 'hope-v1', 'enable_thinking_indicator': True, 'enable_intervention_prompts': True, 'intervention_confidence_threshold': 0.5, 'enable_status_updates': True, 'enable_autonomous_learning': True, 'autonomous_learning_steps_per_cycle': 100, 'autonomous_learning_checkpoint_interval': 1000, 'chat_learn': {'enabled': False, 'interval_s': 600, 'turns_per_cycle': 10, 'model_hint': 'google/gemma-3n-2b', 'delegate_model_hint': '', 'topic': 'coding this repository (ContinuonXR/continuonbrain/continuonai)', 'modes': ['idle']}, 'autonomy_orchestrator': {'enabled': False, 'modes': ['autonomous'], 'min_interval_s': 30, 'cms_compact_every_s': 600, 'hope_eval_every_s': 1800, 'facts_eval_every_s': 3600, 'wavecore_every_s': 1800, 'tool_router_every_s': 3600, 'min_memory_headroom_mb': 512, 'wavecore_steps_fast': 60, 'wavecore_steps_mid': 120, 'wavecore_steps_slow': 180, 'tool_router_steps': 200}}
Initializing Brain Service (REAL HARDWARE MODE)...
Auto-detecting hardware...
Scanning for hardware devices...

âœ… Found: OAK Camera (USB 3.0)
âœ… Found: Hailo AI HAT+ (PCIe)
âœ… Found: Desktop Monitor

============================================================
Hardware Detection Summary
============================================================
Total devices found: 4

Ai Accelerator:
  â€¢ Hailo AI HAT+ (pcie)
    Capabilities: ai, inference, neural_network, hailo8

Depth Camera:
  â€¢ OAK Camera (usb3: bus_002_dev_003)
    Capabilities: rgb, depth, stereo, ai

Display:
  â€¢ Desktop Monitor (hdmi/dp)
    Capabilities: visual_output

Human Interface:
  â€¢ Keyboard (usb/bt)
    Capabilities: text_input

============================================================

ðŸš€ Re-initializing Chat Agent with Accelerator: Hailo AI HAT+
WARNING:continuonbrain.gemma_chat:transformers not available: cannot import name '_regex' from partially initialized module 'regex' (most likely due to a circular import) (/home/craigm26/.local/lib/python3.13/site-packages/regex/__init__.py).
INFO:continuonbrain.gemma_chat: MockGemmaChat using mock accelerator: Hailo AI HAT+
INFO:continuonbrain.gemma_chat:Using mock Gemma chat. Error: cannot import name '_regex' from partially initialized module 'regex' (most likely due to a circular import) (/home/craigm26/.local/lib/python3.13/site-packages/regex/__init__.py)
Loading Gemma Chat Model...
Initializing episode recorder...
Initializing hardware via ContinuonBrain...
Auto-detecting hardware...
Scanning for hardware devices...

âœ… Found: OAK Camera (USB 3.0)
âœ… Found: Hailo AI HAT+ (PCIe)
âœ… Found: Desktop Monitor

Using detected OAK Camera
  No OAK devices found (DepthAI reported zero devices)
  Camera initialization failed (continuing without camera)
ERROR: Failed to initialize PCA9685: No I2C device at address: 0x40
  Arm initialization failed (continuing without arm)
  Using mock microphone capture
Microphone capture initialized
  Real hardware initialization incomplete
  Continuing with available hardware (network access enabled)
Using MOCK hardware mode
  Using mock microphone capture
Microphone capture initialized
Episode recorder ready
Initializing drivetrain controller...
ERROR: Failed to initialize drivetrain controller at 0x40 (steering=servo[0], throttle=continuous_servo[1]): No I2C device at address: 0x40
  Drivetrain controller unavailable
Initializing mode manager...
Activating AUTONOMOUS mode (motion + inference + training enabled)
============================================================
 Mode Change: idle -> autonomous
============================================================
Time: 2025-12-15 09:43:39
Motion: Enabled
Recording: ON
Inference: ON
Self-Training: OFF

Mode Configuration:
  control_source: vla_policy
  startup_time: 2025-12-15 09:43:39
  auto_activated: True
  self_training_enabled: True
============================================================

Mode manager ready
Initializing HOPE brain...
   CRITICAL: HOPE brain implementation not available!
  This system requires HOPE brain to operate.
  Please ensure hope_impl module is installed:
    pip install -e .
  Error: Failed to load PyTorch C extensions:
    It appears that PyTorch has loaded the `torch/_C` folder
    of the PyTorch repository rather than the C extensions which
    are expected in the `torch._C` namespace. This can occur when
    using the `install` workflow. e.g.
        $ python -m pip install --no-build-isolation -v . && python -c "import torch"

    This error can generally be solved using the `develop` workflow
        $ python -m pip install --no-build-isolation -v -e . && python -c "import torch"  # This should succeed
    or by running Python from a different directory.
WARNING: Skipping HOPE
============================================================
Brain Service Ready
============================================================
INFO:BrainServer:Background learner not active; learning endpoints will report disabled
INFO:continuonbrain.services.brain_service:Switching chat model to: hope-v1
WARNING:continuonbrain.gemma_chat:transformers not available: cannot import name '_regex' from partially initialized module 'regex' (most likely due to a circular import) (/home/craigm26/.local/lib/python3.13/site-packages/regex/__init__.py).
INFO:continuonbrain.gemma_chat:Using mock Gemma chat. Error: cannot import name '_regex' from partially initialized module 'regex' (most likely due to a circular import) (/home/craigm26/.local/lib/python3.13/site-packages/regex/__init__.py)
INFO:continuonbrain.services.brain_service:Successfully switched to model: hope-v1
 Server listening on http://0.0.0.0:8081
[?1049h[22;0;0t[1;24r(B[m[4l[?7h[?1h=[?1h=[39;49m[39;49m[37m[40m[H[2J[37m[40m[J(B[m[39;49m[37m[40m[39;49m[37m[40m[J[39;49m(B[m[22d[93m[44mGetting http://localhost:8081/ui[K[39;49m(B[m[93m[44mLooking up localhost:8081[K[39;49m(B[m[93m[44mMaking HTTP connection to localhost:8081[39;49m(B[m[24d[24;1H[?1049l[23;0;0t[?1l>DEBUG: do_GET called for path: /training
DEBUG: do_GET called for path: /training
DEBUG: do_GET called for path: /training
DEBUG: do_GET called for path: /training
DEBUG: do_GET called for path: /favicon.ico
